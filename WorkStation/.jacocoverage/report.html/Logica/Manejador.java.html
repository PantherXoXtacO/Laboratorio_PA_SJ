<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Manejador.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;Lab_Pro_Apl&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">Logica</a> &gt; <span class="el_source">Manejador.java</span></div><h1>Manejador.java</h1><pre class="source lang-java linenums">package Logica;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import DataType.*;


public class Manejador {
    //Clase que conserva las colecciones globales del sistema
    
    private List&lt;Usuario&gt; usuarios;
    private List&lt;Cliente&gt; clientes;
    private List&lt;Artista&gt; artistas;
    private List&lt;ListaDeReproduccion&gt; Listas; // Listas por defecto
<span class="fc" id="L20">    private Genero genero=new Genero(&quot;General&quot;); // Guarda el genero raiz</span>
    private List&lt;Genero&gt; generosList;
    private List&lt;Tema&gt; Temas;//Guarda los temas en una lista
    private List&lt;Album&gt; Albums;
    private Album TemporalAlbum;
    private List&lt;Genero&gt; TemporalGeneros;
    
    //Ids para la identificadores
    private double IdTema;
    private double IdAlbum;
    private double IdList;
    
    //Para la base de datos
<span class="fc" id="L33">    EntityManagerFactory emfactory = Persistence.createEntityManagerFactory( &quot;Lab_Pro_AplPU&quot; );</span>
    
    
<span class="fc" id="L36">    private static Manejador instancia=null;</span>
    
<span class="fc" id="L38">    private Manejador(){</span>
<span class="fc" id="L39">        usuarios =new ArrayList();</span>
<span class="fc" id="L40">        clientes=new ArrayList();</span>
<span class="fc" id="L41">        artistas=new ArrayList();</span>
<span class="fc" id="L42">        Listas=new ArrayList(); // Listas por defecto</span>
<span class="fc" id="L43">        generosList=new ArrayList();</span>
<span class="fc" id="L44">        Temas=new ArrayList();</span>
<span class="fc" id="L45">        IdTema=0;</span>
<span class="fc" id="L46">        IdAlbum=0;</span>
<span class="fc" id="L47">        IdList=0;</span>
        
<span class="fc" id="L49">        EntityManager entitymanager = emfactory.createEntityManager( );    </span>
<span class="fc" id="L50">        Query q = entitymanager.createQuery(&quot;SELECT a FROM Cliente a&quot;);</span>
<span class="fc" id="L51">        Query q2 = entitymanager.createQuery(&quot;SELECT a FROM Artista a&quot;);</span>
<span class="fc" id="L52">        Query QGeneros = entitymanager.createQuery(&quot;SELECT a FROM Genero a&quot;);</span>
<span class="fc" id="L53">        Query q3 = entitymanager.createQuery(&quot;SELECT a from Album a&quot;);</span>
<span class="fc" id="L54">        Query q4 = entitymanager.createQuery(&quot;SELECT a from Tema a&quot;);</span>
<span class="fc" id="L55">        clientes = q.getResultList();</span>
<span class="fc" id="L56">        artistas = q2.getResultList();</span>
<span class="fc" id="L57">        generosList = QGeneros.getResultList();</span>
<span class="fc" id="L58">        Albums = q3.getResultList();</span>
<span class="fc" id="L59">        Temas = q4.getResultList();</span>
        
        
        
        
<span class="fc" id="L64">        GeneralGetHijos();</span>
<span class="fc" id="L65">    }</span>
    
    private void GeneralGetHijos(){
<span class="fc" id="L68">        Iterator it = generosList.iterator();</span>
        Genero g;
<span class="pc bpc" id="L70" title="1 of 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L71">            g=(Genero) it.next();</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">            if(g.getPadre().equals(genero.getNombre())){</span>
<span class="nc" id="L73">                genero.addHijo(g);</span>
            }
            else{
<span class="nc" id="L76">                Genero padre = findGenero(g.getPadre());</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">                if(padre!=null){</span>
<span class="nc" id="L78">                    padre.addHijo(g);</span>
                }
<span class="nc" id="L80">            }</span>
        }
<span class="fc" id="L82">    }</span>
    
     public List getAlbumsItem() {
<span class="nc" id="L85">        Iterator it = Albums.iterator();</span>
<span class="nc" id="L86">        List ret= new ArrayList();</span>
        Album L;
<span class="nc bnc" id="L88" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L89">            L= (Album) it.next();</span>
<span class="nc" id="L90">            ret.add(new Item(L,L.getNombre()));</span>
        }
<span class="nc" id="L92">        return ret;</span>
    }
     
     public List getListasItem() {
<span class="nc" id="L96">        Iterator it = Listas.iterator();</span>
<span class="nc" id="L97">        List ret= new ArrayList();</span>
        ListaDeReproduccion L;
<span class="nc bnc" id="L99" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L100">            L= (ListaDeReproduccion) it.next();</span>
<span class="nc" id="L101">            ret.add(new Item(L,L.getNombre()));</span>
        }
<span class="nc" id="L103">        return ret;</span>
    }
    
    public List getTemasItem() {
<span class="nc" id="L107">        Iterator it = Temas.iterator();</span>
<span class="nc" id="L108">        List ret= new ArrayList();</span>
        Tema L;
<span class="nc bnc" id="L110" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L111">            L= (Tema) it.next();</span>
<span class="nc" id="L112">            ret.add(new Item(L,L.getNombre()));</span>
        }
<span class="nc" id="L114">        return ret;</span>
    }
    
    public List&lt;Cliente&gt; getClientes(){
<span class="fc" id="L118">        return this.clientes;        </span>
    }
    
    public List&lt;Artista&gt; getArtistas(){
<span class="fc" id="L122">        return this.artistas;        </span>
    }
    
    public static Manejador getinstance(){
<span class="fc bfc" id="L126" title="All 2 branches covered.">        if (instancia==null)</span>
<span class="fc" id="L127">            instancia = new Manejador();</span>
<span class="fc" id="L128">        return instancia;</span>
    }
    
    public void addCliente(Cliente usu){
<span class="fc" id="L132">        clientes.add(usu);</span>
<span class="fc" id="L133">        EntityManager entitymanager = emfactory.createEntityManager( );  </span>
        try{
<span class="fc" id="L135">            entitymanager.getTransaction().begin();</span>
<span class="fc" id="L136">            entitymanager.persist(usu);</span>
<span class="fc" id="L137">            entitymanager.getTransaction().commit();</span>
<span class="fc" id="L138">            entitymanager.close(); </span>
        }
<span class="nc" id="L140">        catch (Exception e) {</span>
<span class="nc" id="L141">            e.printStackTrace();</span>
<span class="nc" id="L142">            entitymanager.getTransaction().rollback();</span>
<span class="fc" id="L143">        } </span>
<span class="fc" id="L144">    } </span>
    
    public void addArtista(Artista usu){
<span class="fc" id="L147">        artistas.add(usu); </span>
<span class="fc" id="L148">        EntityManager entitymanager = emfactory.createEntityManager( );    </span>
        try {
<span class="fc" id="L150">            entitymanager.getTransaction().begin();</span>
<span class="fc" id="L151">            entitymanager.persist(usu);</span>
<span class="fc" id="L152">            entitymanager.getTransaction().commit();</span>
<span class="fc" id="L153">            entitymanager.close(); </span>
        }
<span class="nc" id="L155">        catch (Exception e) {</span>
<span class="nc" id="L156">            e.printStackTrace();</span>
<span class="nc" id="L157">            entitymanager.getTransaction().rollback();</span>
<span class="fc" id="L158">        } </span>
<span class="fc" id="L159">    }</span>
        
    public boolean nicknameLibre(String nickname){
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if(this.obtenerCliente(nickname) == null){</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">            if(this.obtenerArtista(nickname)== null)</span>
<span class="nc" id="L164">                return true;</span>
        }
<span class="nc" id="L166">        return false;</span>
    }  
    
    public boolean mailLibre(String mail){
<span class="fc bfc" id="L170" title="All 2 branches covered.">        if(this.obtenerClientePorMail(mail) == null){</span>
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">            if(this.obtenerArtistaPorMail(mail)== null)</span>
<span class="fc" id="L172">                return true;</span>
        }
<span class="fc" id="L174">        return false;</span>
    } 
    
    public boolean artistLibre(String nombre){
<span class="fc bfc" id="L178" title="All 2 branches covered.">            if(this.obtenerArtista(nombre)== null)</span>
<span class="fc" id="L179">                return true;</span>
<span class="fc" id="L180">            return false;</span>
    }  
    
   
    public Usuario obtenerClientePorMail(String mail){
<span class="fc" id="L185">        Iterator it = clientes.iterator();</span>
        Cliente user;
<span class="fc bfc" id="L187" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L188">            user = (Cliente)it.next();</span>
<span class="fc bfc" id="L189" title="All 2 branches covered.">            if(user.getMail().equals(mail))</span>
<span class="fc" id="L190">                return user;</span>
        }
<span class="fc" id="L192">        return null;</span>
    }
    public Usuario obtenerArtistaPorMail(String mail){
<span class="fc" id="L195">        Iterator it = artistas.iterator();</span>
        Artista user;
<span class="fc bfc" id="L197" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L198">            user = (Artista)it.next();</span>
<span class="pc bpc" id="L199" title="1 of 2 branches missed.">            if(user.getMail().equals(mail))</span>
<span class="nc" id="L200">                return user;</span>
        }
<span class="fc" id="L202">        return null;</span>
    }
        
    
    public Usuario obtenerUsuario(String nickname){
<span class="nc" id="L207">        Iterator it = usuarios.iterator();</span>
        Usuario user;
<span class="nc bnc" id="L209" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L210">            user = (Usuario)it.next();</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">            if(user.getNickname().equals(nickname))</span>
<span class="nc" id="L212">                return user;</span>
        }
<span class="nc" id="L214">        return null;</span>
    }
    
    
    public Cliente obtenerCliente(String nickname){
<span class="fc" id="L219">        Iterator it = clientes.iterator();</span>
        Cliente user;
<span class="pc bpc" id="L221" title="1 of 2 branches missed.">        while(it.hasNext()){</span>
<span class="fc" id="L222">            user = (Cliente)it.next();</span>
<span class="pc bpc" id="L223" title="1 of 2 branches missed.">            if(user.getNickname().equals(nickname))</span>
<span class="fc" id="L224">                return user;</span>
        }
<span class="nc" id="L226">        return null;</span>
    }
    
    public Artista obtenerArtista(String nickname){
<span class="fc" id="L230">        Iterator it = artistas.iterator();</span>
        Artista user;
<span class="fc bfc" id="L232" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L233">            user = (Artista)it.next();</span>
<span class="fc bfc" id="L234" title="All 2 branches covered.">            if(user.getNickname().equals(nickname))</span>
<span class="fc" id="L235">                return user;</span>
        }
<span class="fc" id="L237">        return null;</span>
    }
    
    
    //Funciones auxiliares
    public Genero getGenero(){
<span class="fc" id="L243">        return genero;</span>
    }
    
    public void createTemporalAlbum(){
<span class="fc" id="L247">        this.TemporalAlbum = new Album();</span>
<span class="fc" id="L248">    }</span>
    
    public void deleteTemporalAlbum(){
<span class="fc" id="L251">        this.TemporalAlbum = null;</span>
<span class="fc" id="L252">    }</span>
    
    public Album getTemporalAlbum(){
<span class="fc" id="L255">        return this.TemporalAlbum;</span>
    }
    
    public Genero getGeneroPorNombre(String nombre){
<span class="fc" id="L259">        Iterator it = generosList.iterator();</span>
        Genero user;
<span class="fc bfc" id="L261" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L262">            user = (Genero)it.next();</span>
<span class="fc bfc" id="L263" title="All 2 branches covered.">            if(user.getNombre().equals(nombre))</span>
<span class="fc" id="L264">                return user;</span>
        }
<span class="fc" id="L266">        return null;</span>
    }
    
    public ListaParticular getListaPorNombre(Cliente user, String nombre){
<span class="nc" id="L270">        Iterator it = user.getListas().iterator();</span>
        ListaDeReproduccion lista;
<span class="nc bnc" id="L272" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L273">            lista = (ListaDeReproduccion)it.next();</span>
<span class="nc bnc" id="L274" title="All 2 branches missed.">            if(lista.getNombre().equals(nombre)){</span>
<span class="nc" id="L275">                ListaParticular listaFinal = (ListaParticular) lista;</span>
<span class="nc" id="L276">                return listaFinal;</span>
            }
        }
<span class="nc" id="L279">        return null;</span>
    }
    
    public List&lt;Genero&gt; getListGeneros(){
<span class="nc" id="L283">        return generosList;</span>
    }

    boolean FindUser(String text) {
<span class="nc" id="L287">        Iterator it=usuarios.iterator();</span>
        Usuario user;
<span class="nc bnc" id="L289" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L290">            user=(Usuario)it.next();</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">            if(user.getNickname().equals(text)){</span>
<span class="nc" id="L292">                return true;</span>
            }
        }
<span class="nc" id="L295">        return false;</span>
    }

    public void persist(Object object) {
<span class="nc" id="L299">        EntityManager entitymanager = emfactory.createEntityManager( );</span>
<span class="nc" id="L300">        entitymanager.getTransaction().begin();</span>
        try {
<span class="nc" id="L302">            entitymanager.persist(object);</span>
<span class="nc" id="L303">            entitymanager.getTransaction().commit();</span>
<span class="nc" id="L304">        } catch (Exception e) {</span>
<span class="nc" id="L305">            e.printStackTrace();</span>
<span class="nc" id="L306">            entitymanager.getTransaction().rollback();</span>
        } finally {
<span class="nc" id="L308">            entitymanager.close();</span>
<span class="nc" id="L309">        }</span>
<span class="nc" id="L310">    }</span>

    public Genero findGenero(String text) {
<span class="fc" id="L313">        Iterator it=generosList.iterator();</span>
        Genero g;
<span class="fc bfc" id="L315" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L316">            g=(Genero)it.next();</span>
<span class="fc bfc" id="L317" title="All 2 branches covered.">            if(g.getNombre().equals(text))</span>
<span class="fc" id="L318">                return g;</span>
        }
<span class="fc" id="L320">        return null;</span>
    }

    void addGeneroToList(Genero nuevoGen){
<span class="fc" id="L324">        EntityManager entitymanager = emfactory.createEntityManager( );    </span>
        try {
<span class="fc" id="L326">            entitymanager.getTransaction().begin();</span>
<span class="fc" id="L327">            entitymanager.persist(nuevoGen);</span>
<span class="fc" id="L328">            entitymanager.getTransaction().commit();</span>
<span class="fc" id="L329">            entitymanager.close(); </span>
        }
<span class="nc" id="L331">        catch (Exception e) {</span>
<span class="nc" id="L332">            e.printStackTrace();</span>
<span class="nc" id="L333">            entitymanager.getTransaction().rollback();</span>
<span class="fc" id="L334">        } </span>
<span class="fc" id="L335">        generosList.add(nuevoGen);</span>
<span class="fc" id="L336">    }</span>
    
    void addListaParticular(Cliente client, String nombreDeLista, String imagenDeLista){
<span class="fc" id="L339">        ListaParticular lista = new ListaParticular(client, nombreDeLista, imagenDeLista);</span>
<span class="fc" id="L340">        client.setListaParticular(lista);</span>
<span class="fc" id="L341">    }</span>
    
    void addListaPorDefecto(Genero genero, String nombreDeLista, String imagenDeLista){
<span class="fc" id="L344">        ListaPorDefecto lista = new ListaPorDefecto(genero, nombreDeLista, imagenDeLista);</span>
<span class="fc" id="L345">        this.Listas.add(lista);</span>
<span class="fc" id="L346">    }</span>
    

    public List ItemCLiente() {
<span class="fc" id="L350">        Iterator it=clientes.iterator();</span>
        Cliente c;
<span class="fc" id="L352">        List ret= new ArrayList();</span>
<span class="fc bfc" id="L353" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L354">            c=(Cliente) it.next();</span>
<span class="fc" id="L355">            ret.add(new Item(c, c.getNickname()));</span>
        }
<span class="fc" id="L357">        return ret;</span>
    }
    
    
    
    public List ItemArtista() {
<span class="nc" id="L363">        Iterator it=artistas.iterator();</span>
        Artista c;
<span class="nc" id="L365">        List ret= new ArrayList();</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L367">            c=(Artista) it.next();</span>
<span class="nc" id="L368">            ret.add(new Item(c, c.getNickname()));</span>
        }
<span class="nc" id="L370">        return ret;</span>
    }

    public List ItemTemas() {
<span class="nc" id="L374">        Iterator it=Temas.iterator();</span>
        Tema t;
<span class="nc" id="L376">        List ret= new ArrayList();</span>
<span class="nc bnc" id="L377" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L378">            t=(Tema)it.next();</span>
<span class="nc" id="L379">            ret.add(new Item(t, t.getNombre()));</span>
        }
<span class="nc" id="L381">        return ret;</span>
    }
    
    public List ItemGenero() {
<span class="fc" id="L385">        Iterator it=generosList.iterator();</span>
        Genero t;
<span class="fc" id="L387">        List ret= new ArrayList();</span>
<span class="fc bfc" id="L388" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L389">            t=(Genero)it.next();</span>
<span class="fc" id="L390">            ret.add(new Item(t, t.getNombre()));</span>
        }
<span class="fc" id="L392">        return ret;</span>
    }

    public void updatePersistGen(Genero gen) {
<span class="nc" id="L396">        EntityManager entitymanager = emfactory.createEntityManager( );</span>
<span class="nc" id="L397">        entitymanager.merge(gen);</span>
<span class="nc" id="L398">    }</span>

    public List getListasDefectoItem() {
<span class="nc" id="L401">        Iterator it = Listas.iterator();</span>
<span class="nc" id="L402">        List ret = new ArrayList();</span>
        ListaDeReproduccion lista;
<span class="nc bnc" id="L404" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L405">            lista = (ListaDeReproduccion) it.next();</span>
<span class="nc" id="L406">            ret.add(new Item(lista, lista.getNombre()));</span>
        }
<span class="nc" id="L408">        return ret;</span>
    }
    
    public void configTemporalAlbum(Artista artist, String nombre, List&lt;Genero&gt; generos, int año, String imagePath){
<span class="nc" id="L412">        this.TemporalAlbum.setArtista(artist);</span>
<span class="nc" id="L413">        this.TemporalAlbum.setNombre(nombre);</span>
<span class="nc" id="L414">        this.TemporalAlbum.setGenero(generos);</span>
<span class="nc" id="L415">        this.TemporalAlbum.setAnio(año);</span>
<span class="nc" id="L416">        this.TemporalAlbum.setImg(imagePath);</span>
<span class="nc" id="L417">    }</span>
    
    public void addTemporalAlbum(Artista artist){        
<span class="fc" id="L420">        EntityManager em = emfactory.createEntityManager( );</span>
        //Artista artista = em.find(Artista.class, artist.id);
        try {
<span class="fc" id="L423">            em.getTransaction().begin();</span>
<span class="nc" id="L424">            Album albumToAdd = new Album(this.TemporalAlbum);</span>
<span class="nc" id="L425">            List&lt;Genero&gt; generos = this.TemporalAlbum.getGeneros();</span>
<span class="nc" id="L426">            addAlbumToGeneros(generos, albumToAdd);</span>
<span class="nc" id="L427">            em.persist(albumToAdd);</span>
<span class="nc" id="L428">            albumToAdd.addTema(new Tema(&quot;1&quot;,1,1,albumToAdd));</span>
<span class="nc" id="L429">            em.getTransaction().commit(); </span>
<span class="nc" id="L430">            em.close();         </span>
        }
<span class="fc" id="L432">        catch (Exception e) {</span>
<span class="fc" id="L433">            e.printStackTrace();</span>
<span class="fc" id="L434">            em.getTransaction().rollback();</span>
<span class="nc" id="L435">        }         </span>
<span class="fc" id="L436">        deleteTemporalAlbum();        </span>
        
<span class="fc" id="L438">    }</span>
    
    public void addAlbumToGeneros(List&lt;Genero&gt; generos, Album album){
<span class="nc" id="L441">        Iterator it=generos.iterator();</span>
        Genero g;
<span class="nc bnc" id="L443" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L444">            g=(Genero) it.next();</span>
<span class="nc" id="L445">            g.addAlbum(album);</span>
        }
<span class="nc" id="L447">    }</span>
    
    public void createTemporalGenres(){
<span class="fc" id="L450">        this.TemporalGeneros = new ArrayList();</span>
<span class="fc" id="L451">    }</span>
    
    public void addToTemporalGenres(Genero genero){
<span class="nc" id="L454">        this.TemporalGeneros.add(genero);</span>
<span class="nc" id="L455">    }</span>
    
    public void wipeTemporalGenres(){
<span class="fc" id="L458">        this.TemporalGeneros = null;</span>
<span class="fc" id="L459">    }</span>
    
    public List&lt;Genero&gt; getTemporalGenres(){
<span class="fc" id="L462">        return this.TemporalGeneros;</span>
    }
    
    public void addAlbum(Album album){
<span class="nc" id="L466">        this.Albums.add(album);</span>
<span class="nc" id="L467">    }</span>
    
    public void addTema(Tema tema){
<span class="fc" id="L470">        this.Temas.add(tema);</span>
<span class="fc" id="L471">    }</span>

    public List getAllListsAsItem() {
<span class="nc" id="L474">        List ret = new ArrayList();</span>
<span class="nc" id="L475">        Iterator itC = clientes.iterator();</span>
        Cliente c;
<span class="nc bnc" id="L477" title="All 2 branches missed.">        while(itC.hasNext()){</span>
<span class="nc" id="L478">            c=(Cliente) itC.next();</span>
<span class="nc" id="L479">            ret.addAll(c.getListasPublicas());</span>
        }
<span class="nc" id="L481">        ret.addAll(this.getListasDefectoItem());        </span>
<span class="nc" id="L482">        return ret;</span>
    }    
    
    boolean ClienteNickRepetido(String nick) {
<span class="fc" id="L486">        Iterator it = clientes.iterator();</span>
        Cliente c;
<span class="fc bfc" id="L488" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L489">            c=(Cliente) it.next();</span>
<span class="pc bpc" id="L490" title="1 of 2 branches missed.">            if(nick.equals(c.getNickname())){</span>
<span class="nc" id="L491">                return true;</span>
            }
        }
<span class="fc" id="L494">        return false;</span>
    }
    
    boolean ArtistaNickRepetido(String nick) {
<span class="fc" id="L498">        Iterator it = artistas.iterator();</span>
        Artista a;
<span class="fc bfc" id="L500" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L501">            a=(Artista) it.next();</span>
<span class="pc bpc" id="L502" title="1 of 2 branches missed.">            if(nick.equals(a.getNickname())){</span>
<span class="nc" id="L503">                return true;</span>
            }
        }
<span class="fc" id="L506">        return false;</span>
    }
    
    boolean ClienteMailRepetido(String mail) {
<span class="fc" id="L510">        Iterator it = clientes.iterator();</span>
        Cliente c;
<span class="fc bfc" id="L512" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L513">            c=(Cliente) it.next();</span>
<span class="pc bpc" id="L514" title="1 of 2 branches missed.">            if(mail.equals(c.getMail())){</span>
<span class="nc" id="L515">                return true;</span>
            }
        }
<span class="fc" id="L518">        return false;</span>
    }
    
    boolean ArtistaMailRepetido(String mail) {
<span class="fc" id="L522">        Iterator it = artistas.iterator();</span>
        Artista a;
<span class="fc bfc" id="L524" title="All 2 branches covered.">        while(it.hasNext()){</span>
<span class="fc" id="L525">            a=(Artista) it.next();</span>
<span class="pc bpc" id="L526" title="1 of 2 branches missed.">            if(mail.equals(a.getMail())){</span>
<span class="nc" id="L527">                return true;</span>
            }
        }
<span class="fc" id="L530">        return false;</span>
    }


/////////////////////////////////////FUNCIONES DE SERVLET//////////////////////////////////////////////



    public DTUsuario getUserData(String nick) {
<span class="nc" id="L539">        DTUsuario ret = null;</span>
        Usuario u;
<span class="nc" id="L541">        Iterator it = clientes.iterator();</span>
<span class="nc bnc" id="L542" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L543">            u=(Usuario) it.next();</span>
<span class="nc bnc" id="L544" title="All 2 branches missed.">            if(u.getNickname().equals(nick)){</span>
<span class="nc" id="L545">                ret=new DTUsuario(u);</span>
            }            
        }
<span class="nc" id="L548">        return ret;</span>
    }

    public DataSession getUserSession(String nick) {
<span class="nc" id="L552">        DataSession ret = null;</span>
        Usuario u;
<span class="nc" id="L554">        Iterator it=clientes.iterator();</span>
<span class="nc bnc" id="L555" title="All 2 branches missed.">        while(it.hasNext()){</span>
<span class="nc" id="L556">            u=(Usuario) it.next();</span>
<span class="nc bnc" id="L557" title="All 2 branches missed.">            if(u.getNickname().equals(nick)){</span>
<span class="nc" id="L558">                ret=u.getSession();</span>
            }
        }
<span class="nc" id="L561">        return ret;</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>